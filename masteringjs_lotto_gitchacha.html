<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Hello Git</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<script>
const lottoResult = {cnt3:0, cnt4:0, cnt5:0, cnt6:0, profitAmt: 0, payAmt: 0};
const autoLottos = [];

function buyLottos( payAmt ){

    if( payAmt == "" )return;
    lottoResult.payAmt = payAmt;
    const cnt = parseInt(payAmt/1000);
    
    while( autoLottos.length < cnt ){
        autoLottos.push( getAutoNum() );
    }

    console.log( '로또 '+ cnt +'개를 발행했습니다.');
    autoLottos.forEach(function(val){
        console.log(val);
    });

}

function getAutoNum(){
    const arrAutoNum = [];
    while( arrAutoNum.length < 6 ){
        const ranNum = Math.floor(Math.random()*(46-1+1))+1;
        if(!arrAutoNum.includes(ranNum)) arrAutoNum.push(ranNum);
    }
    return arrAutoNum;
}


function getCount(arrAutoNum, luckyNum){ 
    let count = 0;
    arrAutoNum.forEach(function(num){
        if(luckyNum.includes(num)){
            ++count;
        }
    });
    return count;
}

function setLuckyNumber( luckynumber ){
    const len = luckynumber.length;
    if(len == 6){
        console.log("당첨통계\n-------------------");
        console.log("luckynumber=> "+ luckynumber);

        autoLottos.forEach(function(arr){
            const count = getCount(arr, luckynumber);
            let profitAmt = lottoResult.profitAmt;
            switch( count ){
                case 3: lottoResult.cnt3 = lottoResult.cnt3 + 1; profitAmt = profitAmt+5000;
                break;
                case 4: lottoResult.cnt4 = lottoResult.cnt4 + 1; profitAmt = profitAmt+50000;
                break;
                case 5: lottoResult.cnt5 = lottoResult.cnt5 + 1; profitAmt = profitAmt+1500000;
                break;
                case 6: lottoResult.cnt6 = lottoResult.cnt6 + 1; profitAmt = profitAmt+2000000000;
                break;
            }
            lottoResult.profitAmt = profitAmt;
        });
        
        const ernRate = lottoResult.profitAmt/lottoResult.payAmt * 100;

        console.log("3개 일치 (5000원)- " + lottoResult.cnt3 + "개");
        console.log("4개 일치 (50000원)- " + lottoResult.cnt4 + "개");
        console.log("5개 일치 (1500000원)- " + lottoResult.cnt5 + "개");
        console.log("6개 일치 (2000000000원)- " + lottoResult.cnt6 + "개");
        console.log("나의 수익률은 "+ ernRate +"%입니다.");

    }else{
        alert("당첨번호가 6개가 아닙니다.")
    }
}
</script>
<body>
    
</body>
</html>